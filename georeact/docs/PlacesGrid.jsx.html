<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: PlacesGrid.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: PlacesGrid.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react';
import { useState, useEffect, useContext } from 'react';
import { UserContext } from '../userContext';

import { PlaceGrid } from './PlaceGrid';

/** This component displays the visualitzation of the place's grid.
 * @component
 * @function
 * @returns {jsx} 
 */
export function PlacesGrid () {
  
  let [ places, setPlaces] = useState([]);
  let { usuari, setUsuari,authToken,setAuthToken } = useContext(UserContext)
 

/**
 * This asyncron function gets the object place from the API via the GET method
 * @function
 * @async
 * @param {Event} e - The event that triggers the function call.  
 * @returns {Promise}
 */



  const getPlaces = async (e) => {
      try {
  
        const data = await fetch("https://backend.insjoaquimmir.cat/api/places", {
          headers: {
            "Accept": "application/json",
            "Content-Type": "application/json",
            "Authorization": 'Bearer '  + authToken,
  
          },
          method: "GET",
      })
        const resposta = await data.json();
        console.log(resposta);
        if (resposta.success == true )
        {
          setPlaces(resposta.data);
          setAuthToken(authToken);  
          console.log(places); 

         
        }else{
          console.log("La resposta no ha triomfat");
  
        }            
        
      } catch {
        console.log("Error");
        console.log("catch");
      }
    };


    useEffect(()=>{
      getPlaces();
  }, [])

return (
  &lt;>
  &lt;div>PlacesGrid&lt;/div>
  &lt;div className="container-grid">

      {places.map((place) => (
        (place.visibility.name == 'public' || usuari == place.author.email) &amp;&amp;  
        (&lt;tr  key={place.id}>&lt;PlaceGrid place={place} />&lt;/tr>)
      ))}

  &lt;/div>
&lt;/>
)
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Place">Place</a></li><li><a href="global.html#PlaceAdd">PlaceAdd</a></li><li><a href="global.html#PlaceEdit">PlaceEdit</a></li><li><a href="global.html#PlaceList">PlaceList</a></li><li><a href="global.html#PlacesGrid">PlacesGrid</a></li><li><a href="global.html#PlacesMenu">PlacesMenu</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Apr 14 2023 17:30:00 GMT+0200 (Hora d’estiu del Centre d’Europa)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
